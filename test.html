
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Your Name - Resume</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    /* Smooth scrolling for anchor links */
    html {
      scroll-behavior: smooth;
    }
    /* Styling for editable areas */
    [contenteditable="true"] {
      outline: 2px dashed transparent;
      transition: outline 0.2s;
    }
    [contenteditable="true"]:hover {
      outline: 2px dashed #3b82f6;
    }
    [contenteditable="true"]:focus {
      outline: 2px solid #3b82f6;
      background-color: #f0f9ff;
    }
  </style>
</head>
<body class="bg-gray-100 font-sans">
  <!-- Navigation -->
  <nav class="bg-blue-900 text-white p-4 fixed w-full top-0 z-10">
    <div class="container mx-auto flex justify-between items-center">
      <h1 class="text-xl font-bold" contenteditable="true" id="nav-name">Your Name</h1>
      <ul class="flex space-x-6">
        <li><a href="#about" class="hover:text-blue-300">About</a></li>
        <li><a href="#education" class="hover:text-blue-300">Education</a></li>
        <li><a href="#experience" class="hover:text-blue-300">Experience</a></li>
        <li><a href="#skills" class="hover:text-blue-300">Skills</a></li>
        <li><a href="#contact" class="hover:text-blue-300">Contact</a></li>
      </ul>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="bg-blue-800 text-white text-center py-20 mt-16">
    <div class="container mx-auto">
      <h1 class="text-4xl font-bold mb-2" contenteditable="true" id="hero-name">Your Name</h1>
      <p class="text-xl" contenteditable="true" id="hero-title">Software Engineer | Data Scientist | Problem Solver</p>
      <button id="downloadDocxBtn" class="mt-6 bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded">
        Download as DOCX
      </button>
      <button id="downloadImageBtn" class="mt-6 ml-4 bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded">
        Download as Image
      </button>
      <button id="saveBtn" class="mt-6 ml-4 bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded">
        Save Changes
      </button>
    </div>
  </section>

  <!-- About Section -->
  <section id="about" class="py-16">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold mb-6 text-center">About Me</h2>
      <p class="text-lg text-gray-700" contenteditable="true" id="about-text">
        I am a passionate software engineer with a strong background in web development and data analysis. I specialize in building responsive, user-friendly applications and have a keen interest in solving complex problems through code.
      </p>
    </div>
  </section>

  <!-- Education Section -->
  <section id="education" class="bg-gray-200 py-16">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold mb-6 text-center">Education</h2>
      <div id="education-list">
        <div class="mb-6" id="edu-entry-1">
          <h3 class="text-xl font-semibold" contenteditable="true" id="edu-title-1">Bachelor of Science in Computer Science</h3>
          <p class="text-gray-600" contenteditable="true" id="edu-details-1">University Name, City, State | 2018 - 2022</p>
          <p class="text-gray-700" contenteditable="true" id="edu-extra-1">GPA: 3.8/4.0 | Relevant Coursework: Data Structures, Algorithms, Web Development</p>
        </div>
      </div>
      <div class="flex space-x-4 mt-4">
        <button id="add-education" class="bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded">+ Add Education</button>
        <button id="remove-education" class="bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded">- Remove Education</button>
      </div>
    </div>
  </section>

  <!-- Experience Section -->
  <section id="experience" class="py-16">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold mb-6 text-center">Work Experience</h2>
      <div id="experience-list">
        <div class="mb-6" id="exp-entry-1">
          <h3 class="text-xl font-semibold" contenteditable="true" id="exp-title-1">Software Engineer Intern</h3>
          <p class="text-gray-600" contenteditable="true" id="exp-details-1">Tech Company, Remote | June 2021 - August 2021</p>
          <ul class="list-disc list-inside text-gray-700">
            <li contenteditable="true" id="exp-item-1-1">Developed and maintained web applications using React and Node.js.</li>
            <li contenteditable="true" id="exp-item-1-2">Collaborated with a team of 5 to implement new features for a client-facing product.</li>
            <li contenteditable="true" id="exp-item-1-3">Improved application performance by optimizing database queries.</li>
          </ul>
        </div>
      </div>
      <div class="flex space-x-4 mt-4">
        <button id="add-experience" class="bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded">+ Add Experience</button>
        <button id="remove-experience" class="bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded">- Remove Experience</button>
      </div>
    </div>
  </section>

  <!-- Skills Section -->
  <section id="skills" class="bg-gray-200 py-16">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold mb-6 text-center">Skills</h2>
      <ul class="grid grid-cols-2 md:grid-cols-3 gap-4 text-gray-700" id="skills-list">
        <li class="bg-white p-3 rounded shadow" contenteditable="true" id="skill-1">JavaScript</li>
        <li class="bg-white p-3 rounded shadow" contenteditable="true" id="skill-2">Python</li>
        <li class="bg-white p-3 rounded shadow" contenteditable="true" id="skill-3">React</li>
        <li class="bg-white p-3 rounded shadow" contenteditable="true" id="skill-4">Node.js</li>
        <li class="bg-white p-3 rounded shadow" contenteditable="true" id="skill-5">SQL</li>
        <li class="bg-white p-3 rounded shadow" contenteditable="true" id="skill-6">Git</li>
      </ul>
      <div class="flex space-x-4 mt-4">
        <button id="add-skill" class="bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded">+ Add Skill</button>
        <button id="remove-skill" class="bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded">- Remove Skill</button>
      </div>
    </div>
  </section>

  <!-- Contact Section -->
  <section id="contact" class="py-16">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold mb-6 text-center">Contact Me</h2>
      <p class="text-lg text-gray-700 text-center mb-6" contenteditable="true" id="contact-info">
        Email: your.email@example.com | Phone: (123) 456-7890 | LinkedIn: linkedin.com/in/yourname
      </p>
      <div class="max-w-md mx-auto">
        <input type="text" placeholder="Name" class="w-full p-2 mb-4 border rounded">
        <input type="email" placeholder="Email" class="w-full p-2 mb-4 border rounded">
        <textarea placeholder="Message" class="w-full p-2 mb-4 border rounded h-32"></textarea>
        <button class="w-full bg-blue-500 hover:bg-blue-600 text-white py-2 rounded">Send Message</button>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-blue-900 text-white text-center py-4">
    <p contenteditable="true" id="footer-text">Â© 2025 Your Name. All rights reserved.</p>
  </footer>

  <script>
    // Smooth scroll for navigation links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        document.querySelector(this.getAttribute('href')).scrollIntoView({
          behavior: 'smooth'
        });
      });
    });

    // Save and load editable content
    const editableElements = () => document.querySelectorAll('[contenteditable="true"]');
    const saveBtn = document.getElementById('saveBtn');
    let eduCounter = 1; // Track education entries
    let expCounter = 1; // Track experience entries
    let skillCounter = 6; // Track skills (starting after initial 6)

    // Load saved content from localStorage
    function loadContent() {
      editableElements().forEach(el => {
        const savedContent = localStorage.getItem(el.id);
        if (savedContent) {
          el.innerText = savedContent;
        }
      });
    }
    loadContent();

    // Save content to localStorage
    saveBtn.addEventListener('click', () => {
      editableElements().forEach(el => {
        localStorage.setItem(el.id, el.innerText);
      });
      alert('Changes saved successfully!');
    });

    // Add new education entry
    document.getElementById('add-education').addEventListener('click', () => {
      eduCounter++;
      const newEdu = document.createElement('div');
      newEdu.className = 'mb-6';
      newEdu.id = `edu-entry-${eduCounter}`;
      newEdu.innerHTML = `
        <h3 class="text-xl font-semibold" contenteditable="true" id="edu-title-${eduCounter}">New Degree</h3>
        <p class="text-gray-600" contenteditable="true" id="edu-details-${eduCounter}">Institution Name, Location | Date Range</p>
        <p class="text-gray-700" contenteditable="true" id="edu-extra-${eduCounter}">Additional Details</p>
      `;
      document.getElementById('education-list').appendChild(newEdu);
    });

    // Remove last education entry
    document.getElementById('remove-education').addEventListener('click', () => {
      const eduList = document.getElementById('education-list');
      if (eduList.children.length > 1) {
        const lastEdu = eduList.lastElementChild;
        const ids = [
          lastEdu.querySelector('h3').id,
          lastEdu.querySelectorAll('p')[0].id,
          lastEdu.querySelectorAll('p')[1].id
        ];
        ids.forEach(id => localStorage.removeItem(id));
        lastEdu.remove();
        eduCounter = Math.max(1, eduCounter - 1);
      } else {
        alert('Cannot remove the last education entry.');
      }
    });

    // Add new experience entry
    document.getElementById('add-experience').addEventListener('click', () => {
      expCounter++;
      const newExp = document.createElement('div');
      newExp.className = 'mb-6';
      newExp.id = `exp-entry-${expCounter}`;
      newExp.innerHTML = `
        <h3 class="text-xl font-semibold" contenteditable="true" id="exp-title-${expCounter}">New Position</h3>
        <p class="text-gray-600" contenteditable="true" id="exp-details-${expCounter}">Company Name, Location | Date Range</p>
        <ul class="list-disc list-inside text-gray-700">
          <li contenteditable="true" id="exp-item-${expCounter}-1">New responsibility or achievement.</li>
        </ul>
      `;
      document.getElementById('experience-list').appendChild(newExp);
    });

    // Remove last experience entry
    document.getElementById('remove-experience').addEventListener('click', () => {
      const expList = document.getElementById('experience-list');
      if (expList.children.length > 1) {
        const lastExp = expList.lastElementChild;
        const ids = [
          lastExp.querySelector('h3').id,
          lastExp.querySelector('p').id,
          ...Array.from(lastExp.querySelectorAll('li')).map(li => li.id)
        ];
        ids.forEach(id => localStorage.removeItem(id));
        lastExp.remove();
        expCounter = Math.max(1, expCounter - 1);
      } else {
        alert('Cannot remove the last experience entry.');
      }
    });

    // Add new skill
    document.getElementById('add-skill').addEventListener('click', () => {
      skillCounter++;
      const newSkill = document.createElement('li');
      newSkill.className = 'bg-white p-3 rounded shadow';
      newSkill.contentEditable = true;
      newSkill.id = `skill-${skillCounter}`;
      newSkill.innerText = 'New Skill';
      document.getElementById('skills-list').appendChild(newSkill);
    });

    // Remove last skill
    document.getElementById('remove-skill').addEventListener('click', () => {
      const skillsList = document.getElementById('skills-list');
      if (skillsList.children.length > 1) {
        const lastSkill = skillsList.lastElementChild;
        localStorage.removeItem(lastSkill.id);
        lastSkill.remove();
        skillCounter = Math.max(1, skillCounter - 1);
      } else {
        alert('Cannot remove the last skill.');
      }
    });

    // Download resume as DOCX
    document.getElementById('downloadDocxBtn').addEventListener('click', () => {
      const resumeData = {
        name: document.getElementById('hero-name').innerText,
        title: document.getElementById('hero-title').innerText,
        about: document.getElementById('about-text').innerText,
        education: Array.from(document.getElementById('education-list').children).map(div => ({
          title: div.querySelector('h3').innerText,
          details: div.querySelectorAll('p')[0].innerText,
          extra: div.querySelectorAll('p')[1].innerText
        })),
        experience: Array.from(document.getElementById('experience-list').children).map(div => ({
          title: div.querySelector('h3').innerText,
          details: div.querySelector('p').innerText,
          items: Array.from(div.querySelectorAll('li')).map(li => li.innerText)
        })),
        skills: Array.from(document.getElementById('skills-list').children).map(li => li.innerText),
        contact: document.getElementById('contact-info').innerText
      };

      fetch('http://localhost:3000/generate-docx', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(resumeData)
      })
        .then(response => response.blob())
        .then(blob => {
          const url = window.URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.href = url;
          a.download = 'resume.docx';
          document.body.appendChild(a);
          a.click();
          a.remove();
          window.URL.revokeObjectURL(url);
        })
        .catch(error => {
          console.error('Error generating DOCX:', error);
          alert('Failed to generate DOCX. Ensure the backend server is running.');
        });
    });

    // Download resume as image
    document.getElementById('downloadImageBtn').addEventListener('click', () => {
      html2canvas(document.body).then(canvas => {
        const imgData = canvas.toDataURL('image/png');
        const a = document.createElement('a');
        a.href = imgData;
        a.download = 'resume.png';
        document.body.appendChild(a);
        a.click();
        a.remove();
      }).catch(error => {
        console.error('Error generating image:', error);
        alert('Failed to generate image. Try again or check console for errors.');
      });
    });
  </script>
</body>
</html>
